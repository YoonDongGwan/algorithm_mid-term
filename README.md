# 포드 풀커슨 알고리즘(Ford-Fulkerson Algorithm)
포드 풀커슨 알고리즘이란, **유량이 흐르는 네트워크**에서 종점까지 도달할 때, **최대 유량**을 구하는 탐욕 알고리즘이다.  
1956년, L. R. Ford Jr. 와 D. R. Fulkerson 에 의해 구현되어 Ford-Fulkerson 알고리즘이라 부른다.  

# 용어
* *S* : 출발지(Source)  
* *T* : 도착지(Sink)  
* *c(a, b)* : 정점 a와 b 사이의 간선의 용량(capacity)  
* *f(a, b)* : 정점 a와 b 사이에 흐르고 있는 유량(flow)

# 규칙
1. 간선에 흐르는 유량은 용량을 초과해서 흐를 수 없다.
2. 정점 *a*에서 정점 *b*에서 흐르는 유량 *f*가 있다면, *b*에서 *a*로 *-f*만큼 흐른다고 볼 수 있다.
3. 한 정점으로 들어오는 유량과 그 정점에서 나가는 유량은 같다.

# 풀이
1. Source에서 Sink 가는 경로 하나를 찾는다.
* 포드-풀커슨 알고리즘에서는 DFS로 경로를 찾는다. BFS를 사용하는 것은 에드먼즈-카프 알고리즘이다.
2. 그 경로안에 있는 간선 중, 남아있는 용량이 가장 적은 수를 찾아 각 간선에 유량을 흘려보낸다.
* 여기서 남아있는 용량이란 c(a, b) - f(a, b)를 의미한다
3. 더 이상 경로를 찾을 수 없을 때까지 1~2 과정을 반복한다.

이러한 과정을 통해 종점에 도달하는 유량을 구할 수 있게 된다.  
하지만, 위 과정엔 한 가지 고려하지 않은 점이 있다.  
경로를 찾는 과정에서, 결국 찾는 경로들 사이에도 순서가 생기게 된다. 예를 들어, 아래의 그래프가 있다고 가정해보자.

<img width="443" alt="스크린샷 2022-04-26 오후 5 43 07" src="https://user-images.githubusercontent.com/39906922/165260046-c85ad5a9-770c-4b31-bea1-e7e90432345d.png">

이 그래프에서 DFS로 경로를 찾게 된다면, 아래의 순서와 같이 경로를 찾아낼 것이다. (B가 T보다 먼저인 경우)
1. S -> A -> B -> T
2. S -> A -> T
3. S -> B -> T  

먼저 찾아지는 경로에서 간선의 용량을 다 사용했다면, 이후에 찾아지는 경로에서는 당연히 유량을 흘러 보낼 수 없다.  
여기서 고려해야 하는 점은 만약 **먼저 찾아지는 경로보다 후에 찾아지는 경로가 종점까지 도달하는 유량을 더 늘릴 수 있다면?** 이다.  
만약 경로 S -> A -> B -> T 에서 S -> A의 간선의 용량을 다 사용했다면, 이 후에 찾은 경로 S -> A -> T 가 더 높은 유량을 흘러보낼 수 있다하더라도, S -> A -> T 로는 유량을 흘러보낼 수 없다.  
이 문제를 해결하기 위해 `규칙 2. 정점 *a*에서 정점 *b*에서 흐르는 유량 *f*가 있다면, *b*에서 *a*로 *-f*만큼 흐른다고 볼 수 있다.`를 이용한다.

위 그래프에서 A 와 B 사이에는 A -> B 라는 방향으로 f만큼 흐르는 유량이 있었지만, 이번엔 B -> A 의 방향으로 -f만큼 흐르는 유량이 있음을 가정하고 경로를 탐색한다.  
그러면 S -> B -> A -> T 라는 경로가 하나 새로 생기고, B -> A 라는 경로는 사실 존재하지 않지만, A -> B 로 흐르는 유량을 감소시킬 수 있게 되고, 그로 인해 감소된 만큼 다른 곳으로 유량이 흐를 수 있게 된다. 예를 들면, 원래는 S -> A 의 용량이 꽉 차 A -> T 로 유량을 흘러보낼 수 없었지만, A -> B 로 흐르는 유량이 감소되어 A -> T로 흐를 수 있게 된다.  
즉, 유량이 반대로도 흐름을 고려하여 풀이 1, 2, 3 을 거치면, 포드-풀커슨 알고리즘의 목표인 종점에서의 최대 유량을 알 수 있게 된다.
